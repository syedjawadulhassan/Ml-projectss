<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Result - Credit Card Fraud Detection</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- Chart.js for gauge -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="{{ url_for('index') }}">FraudDetect</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">About</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('predict') }}">Predict</a></li>
    </ul>
  </div>
</nav>

<div class="container mt-5 text-center">

  <!-- Prediction Alert -->
  <div class="alert alert-{{ color }}">
    <h4 class="alert-heading">Prediction: {{ prediction }}</h4>
  </div>

  <!-- Gauge Section -->
  {% if probability is not none %}
  <div class="card p-4 mt-4" style="max-width:420px;margin:auto;">
    <canvas id="fraudGauge"></canvas>
    <h5 class="mt-3">
      Probability of fraud: {{ '%.2f'|format(probability * 100) }}%
    </h5>
  </div>
  {% endif %}

  <a href="{{ url_for('predict') }}" class="btn btn-secondary mt-4">
    Make another prediction
  </a>

</div>

<footer class="footer">
  <div class="container">
    <span>Â© 2026 FraudDetect</span>
  </div>
</footer>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Gauge Script -->
<script>
{% if probability is not none %}
const prob = {{ probability * 100 }};
const ctx = document.getElementById('fraudGauge').getContext('2d');

new Chart(ctx, {
    type: 'doughnut',
    data: {
        datasets: [{
            data: [prob, 100 - prob],
            backgroundColor: [
                prob > 50 ? '#dc3545' : '#28a745',
                '#1f2937'
            ],
            borderWidth: 0
        }]
    },
    options: {
        cutoutPercentage: 75,
        rotation: -90,
        circumference: 180,
        plugins: {
            legend: { display: false },
            tooltip: { enabled: false }
        }
    }
});
{% endif %}
</script>

</body>
</html>